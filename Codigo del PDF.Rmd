---
title: "**Análisis del rendimiento ofensivo y defensivo en la NBA mediante la conversión de puntos y asistencias por periodos cuatrienales en los últimos 28 años**"
author: "Samuel Barreto y Leonardo Mentado"
date: "`r Sys.Date()`"
output: pdf_document
editor_options: 
  chunk_output_type: inline
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(funModeling)
library(readxl)
library(knitr)
library(gridExtra)
library(corrplot)
library(RColorBrewer)
library(tseries)
library(kableExtra)
library(tinytex)
library(ggplot2)

# Lectura de base de datos
NBA <- read_excel("~/1er Semestre de Estadistica/Computacion I/Trabajo Final/An-lisis-NBA-Grupo-10/NBA G1-G10.xlsx")

# Decalracion de variables
NBA$PTS <- as.numeric(NBA$PTS)
NBA$FGM <- as.numeric(NBA$FGM)
NBA$FGA <- as.numeric(NBA$FGA)
NBA$`FG%` <- as.numeric(NBA$`FG%`)
NBA$FTM <- as.numeric(NBA$FTM)
NBA$AST <- as.numeric(NBA$AST)
NBA$DD2 <- as.numeric(NBA$DD2)
NBA$DD3 <- as.numeric(NBA$DD3)
NBA$Season <- as.vector(NBA$Season)


# Datos de la Variable temporada

NBA <- NBA %>%
  mutate(Cuatrienal = cut(Season, breaks = seq(1996, 2024, by = 4),
          labels = c("1996-2000", "2000-2004", "2004-2008", 
                                     "2008-2012", "2012-2016", "2016-2020", "2020-2024")))
```
# Introducción

El rendimiento de los jugadores de la NBA ha evolucionado significativamente en las últimas décadas debido a cambios en las reglas del juego, avances en la preparación física y nuevas estrategias de juego. Este estudio busca responder como ha sido efectivo estos cambios tanto en la ofensiva como en la defensiva al momento de convertir puntos por canasta y en la realización de asistencias, comparándolo por periodos cuatrienales de los últimos 28 años, entonces nos preguntamos:

¿Cómo ha variado el rendimiento de la conversión de puntos en los últimos 28 años y que periodo cuatrienal ha obtenido mayor desempeño en conversión de canastas?

## Justificación de la Investigación

-   Es importante para el análisis de datos en el deporte para identificar tendencias y patrones.
-   Uso de técnicas estadísticas y visualización de datos para entender el rendimiento de conversión y asistencias.
-   Determinar para los analistas del campo, la eficiencia de los avances deportivos para la preparación de los jugadores de la NBA.
-   Identificar que tan efectivo han sido los cambios en la NBA a nivel de conversiones de canasta y asistencias en los últimos 28 años.

El análisis del rendimiento ofensivo y defensivo en la NBA es fundamental para entender la evolución del baloncesto moderno y cómo los jugadores y equipos han adaptado sus estrategias a lo largo del tiempo. Nos centraremos en el estudio de las métricas clave de rendimiento (puntos y asistencias) y su conversión en periodos cuatrienales (cada 4 años) durante las últimas 28 temporadas (desde 1996 hasta 2024).

## Análisis Univariante

```{r Grafico Univariante 1, fig.align='center', echo=FALSE,out.width='52%'}
# Puntos por temporada
ggplot(NBA, aes(x = PTS)) + geom_histogram(binwidth = 2, fill = "blue", color = "darkblue") + labs(title = "Distribucion de Puntos por Temporada", x = "Puntos por Temporada", y = "Frecuencia") + theme_minimal() + theme(plot.title = element_text(hjust = 0.5))
```
### Rendimiento general de las 28 temporadas de la NBA
* La mayor parte de los datos se concentran en frecuencias bajas (0–50), pero tiene un pico excepcional en 0 PTS, lo que sugiere una temporada atípica. Esto puede deberse a la Aparición de jugadores excepcionales, además la mayoría de las temporadas tienen frecuencias bajas, lo que resulta en un rendimiento ofensivo "normal".
* El gráfico revela una distribución heterogénea, este fenómeno resalta la importancia de combinar análisis estadísticos con contexto histórico.

```{r Grafico Univariante 2, fig.align='center', echo=FALSE,out.width='70%'}
# Asistencias por Temporada
ggplot(NBA, aes(x = Cuatrienal, y = AST)) +
  geom_boxplot(fill = "lightblue") +
  labs(title = "Distribucion de Asistencias por Periodo Cuatrienal",
       x = "Periodo Cuatrienal",
       y = "Asistencias por Temporada") +
  theme_minimal() + theme(plot.title = element_text(hjust = 0.5))
```
El grafico de caja indica una fuerte presencia de datos atípicos por encima de la media en la mayoría de periodos cuatrienales que podrían vincularse a temporadas históricas,  como también la introducción del "hand-checking" en 2004. Logrando resaltar la evolución de las asistencias en la NBA, reflejando cambios en estrategias, reglas y roles de los jugadores.

```{r Grafico Univariante 3, fig.align='center', echo=FALSE,out.width='65%'}
# Total de tiros realizados
ggplot(NBA, aes(x = FGA, fill = Cuatrienal)) +
  geom_density(alpha = 0.5, color = "black") +
  labs(title = "Densidad de Tiros Realizados por Periodo Cuatrienal",
       x = "Tiros Realizados por temporada",
       y = "Densidad") +
  theme_minimal() + theme(plot.title = element_text(hjust = 0.5))
```
### Estudio gráfico sobre el total de tiros realizados
Aunque el volumen de tiros ha aumentado, la baja densidad implica que estos no se concentran en temporadas específicas, sino que se distribuyen de manera más uniforme, como se puede observar en el periodo 2016-2020 que, aunque se registran 2000 tiros, la densidad baja (0,0005) indicando que no hay picos dominantes, sino una proporción equilibrada entre temporadas. esto indicaría un incremento significativo en el volumen de juego ofensivo en la NBA, especialmente en el periodo más reciente 2020-2024.


```{r Grafico Univariante 4, echo=FALSE, fig.align='center', out.width='80%', fig.width=8, results='hide'}
# Porcentaje de Tiros Anotados
NBA %>%
group_by(Cuatrienal) %>%
  summarise(FG_Mean = mean(`FG%`, na.rm = TRUE)) %>%
  ggplot(aes(x = Cuatrienal, y = FG_Mean, fill = Cuatrienal)) +
  geom_bar(stat = "identity") + scale_fill_brewer(palette = "Blues") +
  labs(title = "Porcentaje de Tiros Anotados por Periodo Cuatrienal",
       x = "Periodo Cuatrienal",
       y = "FG% Promedio") +
  theme_minimal() + theme(plot.title = element_text(hjust = 0.5))
```

### Equilibrio en el porcentaje de tiros anotados (periodos cuatrienales)
El FG% promedio de equipos suele oscilar entre 44% y 48%, históricamente el grafico muestra que los equipos de la NBA han mejorado su eficiencia en tiros de campo debido a avances en estrategias y entrenamiento. Como en las últimas décadas, en donde se hace énfasis en tiros de tres puntos y la eficiencia, llevando a equipos a priorizar tiros de mayor puntaje, lo que causa el aumento del porcentaje de tiros anotados durante el paso de las temporadas.


## Análisis Bivariante

```{r Graficos Bivariante 1 y 2, fig.align='center', echo=FALSE,out.width='70%'}
# Puntos vs Asistencias por Temporada
g1 <- ggplot(NBA, aes(x = PTS, y = AST, color = Cuatrienal)) +
  geom_point(alpha = 0.6) +
  labs(title = "Relacion entre Puntos y Asistencias por Temporada",
       x = "Puntos",
       y = "Asistencias") + 
  theme_minimal() + theme(plot.title = element_text(hjust = 0.5))

# Total de Tiros Anotados vs Tiros Realizados
g2 <- ggplot(NBA, aes(x = FGA, y = FGM, color = Cuatrienal)) +
  geom_point(alpha = 0.6) + 
  labs(title = "Relacion entre Tiros Realizados y Tiros Anotados",
       x = "Tiros Realizados (FGA)",
       y = "Tiros Anotados (FGM)") +
  theme_minimal() + theme(plot.title = element_text(hjust = 0.5))

grid.arrange(g1, g2, nrow = 2)
```
## Linealidad y Puntos atípicos

### Puntos vs Asistencias
El gráfico sugiere una correlación positiva entre puntos y asistencias, muy común en equipos con un estilo de juego colaborativo. La dispersión de los puntos alrededor de la línea de tendencia refleja la consistencia de la relación, además se observan puntos alejados de la tendencia general, causa de temporadas con estrategias ofensivas únicas. 

### Tiros anotados vs tiros realizados
Este grafico al igual que el anterior refleja una correlación positiva lo que indica que a mayor número de tiros realizados, el número de tiros anotados también aumenta. Durante el periodo 2004-2008 se observa un valor atipico inusual contando con 2173 tiros realizados y 978 anotados, siendo este un periodo con alta eficiencia general y ofensiva.

```{r Grafico Bivariante 3 y 4, echo=FALSE, fig.align='center', fig.width=8, out.width='80%'}
# Dobles-Dobles por Periodo Cuatrienal
g1_1 <- NBA %>%
  group_by(Cuatrienal) %>%
  summarise(DD2_Mean = mean(DD2, na.rm = TRUE)) %>%
  ggplot(aes(x = Cuatrienal, y = DD2_Mean, fill = Cuatrienal)) +
  geom_bar(stat = "identity") + scale_fill_brewer(palette = "PuBuGn") +
  labs(title = "Promedio de Dobles-Dobles por Periodo Cuatrienal",
       x = "Periodo Cuatrienal",
       y = "DD2 Promedio") +
  theme_minimal() + theme(plot.title = element_text(hjust = 0.5))
  
# Triples-Dobles (DD3) por Periodo Cuatrienal
g1_2 <- NBA %>%
  group_by(Cuatrienal) %>%
  summarise(DD3_Mean = mean(DD3, na.rm = TRUE)) %>%
  ggplot(aes(x = Cuatrienal, y = DD3_Mean, fill = Cuatrienal)) +
  geom_bar(stat = "identity") + scale_fill_brewer(palette = "PuBuGn") +
  labs(title = "Promedio de Triples-Dobles por Periodo Cuatrienal",
       x = "Periodo Cuatrienal",
       y = "DD3 Promedio") +
  theme_minimal() + theme(plot.title = element_text(hjust = 0.5))

  grid.arrange(g1_1, g1_2, nrow = 2)
```
### Estudio gráfico de la dispersión de DD2 y DD3 por periodo cuatrienal
* Los periodos entre (2000-2008) corresponder a periodos con jugadores dominantes en DD2. Por otro lado los periodos entre 2016-2024 rasaltan un promedio menor, revelando poco énfasis en rebotes o asistencias.
* Por otro lado los picos en DD3 que corresponden a temporadas históricas (2016-2024) de jugadores dominantes, proporcionando un aumento significativo en triples-dobles podría deberse a un mayor ritmo de juego y posesiones por partido.

```{r Grafico Bivariante 5, echo=FALSE, fig.align='center', out.width='60%'}
# Tiros Libres Anotados (FTM) vs Puntos (PTS)
ggplot(NBA, aes(x = FTM, y = PTS, color = Cuatrienal)) +
  geom_point(alpha = 0.6) +
  labs(title = "Relacion entre Tiros Libres Anotados y Puntos",
       x = "Tiros Libres Anotados (FTM)",
       y = "Puntos (PTS)") +
  theme_minimal() + theme(plot.title = element_text(hjust = 0.5))
```

### Una correlación Semi-Homogénea
En la NBA, los tiros libres aportan directamente a los puntos totales. Por eso se puede notar una correlación positiva, es decir, a más tiros libres anotados, más puntos por partido, por otras parte el estilo de Juego influye en equipos que priorizan tiros de tres puntos sobre las entradas al aro (que generan más tiros libres).

## Conclusiones
* En la NBA se han implementado una serie de nuevos reglamentos y técnicas de entrenamiento, con la finalidad de buscar una mejor afinidad al momento de realizar los juegos de Basquetbol, donde estos tipos de cambio han tenido impacto en los juegos del mismo, mejorando tanto los métodos defensivos como ofensivos de los jugadores, bien sea para obtener un mejor rendimiento o en algunos casos un peor rendimiento.
* Algunas épocas están enmarcadas por una serie de estrellas Basquetbolistas que por su talento y hazaña ha ayudado que sus periodos de tiempo aumentaran en buenas medidas sus registros y gráficas.
